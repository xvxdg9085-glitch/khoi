{% extends 'base.html' %} {% load static %}
<!-- prettier-ignore -->
{% block title %}Product list {%endblock %}
<!-- prettier-ignore -->
{% block content %}
<div class="container mt-5 hero__v6">
    <h2 class="text-center text-uppercase mb-3" data-aos="fade-up" data-aos-delay="0">Product Categories</h2>
      <div class="row g-4 my-3">
        {% for category in categories %}
          <div class="col-12 col-sm-6 col-md-4 col-lg-3 d-flex">
            <div class="card shadow-sm w-100 h-100" data-aos="fade-up" data-aos-delay="300">
              <!-- Hình ảnh danh mục -->
              {% if category.thumbnail %}
                <div class="ratio ratio-1x1">
                  <img src="{{ category.thumbnail.url }}" class="card-img-top object-fit-cover" alt="{{ category.name }}" />
                </div>
              {% else %}
                <div class="ratio ratio-1x1 bg-light d-flex align-items-center justify-content-center">
                  <span class="text-muted">No Image</span>
                </div>
              {% endif %}

              <!-- Nội dung danh mục -->
              <div class="card-body d-flex flex-column">
                <h5 class="card-title fw-bold" style="font-size: 20px">{{ category.name }}</h5>

                <!-- Popover chỉ cho phần mô tả -->
                <p
                  class="card-text text-muted"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover focus"
                  data-bs-placement="top"
                  data-bs-content="{{ category.description }}"
                  style="
                    overflow: hidden;
                    display: -webkit-box;
                    -webkit-line-clamp: 2;
                    -webkit-box-orient: vertical;
                    text-overflow: ellipsis;
                    min-height: 48px;
                  "
                >
                  {{ category.description|default:'No description available.' }}
                </p>

                <div class="mt-auto">
                 <a href="{% url 'product_by_category' category.id %}" class="btn btn-primary w-100">View Products</a>
                </div>
              </div>
            </div>
          </div>
        {% empty %}
          <p class="text-center text-muted">No categories available.</p>
        {% endfor %}
      </div>
    </div>
  <!-- Kích hoạt popover -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
      ;[...popoverTriggerList].map((popoverTriggerEl) => new bootstrap.Popover(popoverTriggerEl))
    })
  </script>
{% endblock %}